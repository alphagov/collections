<% content_for :page_class, "topics-page" %>

<header class="page-header group">
  <div class="full-width">
    <div class="heading">
      <h1><%= yield :page_title %></h1>

      <% if organisations.any? %>
        <aside class="metadata">
          <dl>
            <dt>From:</dt>
            <dd><%= organisations.array_of_links.to_sentence.html_safe %></dd>
          </dl>
        </aside>
      <% end %>
    </div>

    <div class="latest-subscribe">
      <ul>
        <li class="email primary">
          <%= link_to email_signup_path(topic_slug: params[:topic_slug], subtopic_slug: params[:subtopic_slug]) do %>
          Subscribe to email alerts
          <% end %>
        </li>
        <% if local_assigns[:link_to_latest_feed] %>
          <li><%= link_to 'See latest changes to this content', latest_changes_path(topic_slug: params[:topic_slug], subtopic_slug: params[:subtopic_slug]) %></li>
        <% end %>
      </ul>
    </div>
  </div>
</header>

<% if local_assigns[:beta_label] %>
  <%= render partial: 'govuk_component/beta_label',
             locals: {
               message: "This part of #{link_to('GOV.UK', '/')} is new and being improved - #{link_to('find out what this means','/help/beta')}"
             } %>
<% end %>

<% if !local_assigns[:beta_label] && subtopic.beta? %>
  <%= render 'topic_beta', topic: subtopic %>
<% end %>

<div class="browse-container full-width">
  <% if subtopic.description.present? %>
    <div class="category-description">
      <p><%= subtopic.description %></p>
    </div>
  <% end %>

  <%= yield %>
</div>
